<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="New features in Blockbridge 5.0.">
<meta name="keywords" content=" release">
<title>Version 5.0 Release Notes | Blockbridge Knowledgebase</title>
<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">

<link rel="stylesheet" href="/css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/css/customstyles.css">
<link rel="stylesheet" href="/css/sidebar.css">
<link rel="stylesheet" href="/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/css/theme-blockbridge.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="/js/toc.js"></script>
<script src="/js/customscripts.js"></script>

<link rel="shortcut icon" href="/images/bb-favicon.ico" type="image/png">

<script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101238799);</script>
<script async src="//static.getclicky.com/js"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
        $(document).ready(function() {
          // Initialize navgoco with default options
          $("#mysidebar").navgoco({
            caretHtml: '',
            accordion: false,
            openClass: 'active', // open
            save: false, // leave false or nav highlighting doesn't work right
            cookie: {
              name: 'navgoco',
              expires: false,
              path: '/'
            },
            slide: {
              duration: 400,
              easing: 'swing'
            }
          });

          $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
  <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid topnavlinks">
        <div class="navbar-header">
            <div class="navbar-brand"><svg class="bb-logo" width="100%" xmlns="http://www.w3.org/2000/svg" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 346 40" enable-background="new 0 0 346 40" space="preserve">
  <path fill="#FFFFFF" d="M85.328613,31.876953L90.526855,0.72998h12.858887c2.340332,0,4.255859,0.209961,5.745117,0.62793 c1.489746,0.418457,2.739746,1.274414,3.750977,2.566895c1.010742,1.293457,1.515625,2.806641,1.515625,4.541016 c0,1.902344-0.600098,3.518066-1.800781,4.848633c-1.201172,1.331543-2.8125,2.225098-4.833496,2.681152 c3.419922,1.20166,5.129883,3.461426,5.129883,6.777832c0,2.416992-0.817383,4.540039-2.451172,6.365234 s-4.350586,2.738281-8.150391,2.738281H85.328613z M95.493652,24.986328h4.652832c1.444336,0,2.440918-0.304688,2.987793-0.913086 c0.547363-0.608398,0.821777-1.269531,0.821777-1.985352c0-0.881836-0.300781-1.59375-0.902344-2.132812 c-0.601074-0.540039-1.495117-0.810547-2.681641-0.810547h-3.90332L95.493652,24.986328z M97.557129,12.618652h3.563477 c2.847656,0,4.271484-0.943359,4.271484-2.82959c0-1.657715-1.127441-2.487305-3.382324-2.487305h-3.564941L97.557129,12.618652z"/>
  <path fill="#FFFFFF" d="M129.130859,0.72998l-5.196777,31.146973h-8.76123l5.19873-31.146973H129.130859z"/>
  <path fill="#FFFFFF" d="M140.753906,32.561523c-3.20752,0-5.901367-0.954102-8.08252-2.864258 c-2.181152-1.908203-3.271484-4.513672-3.271484-7.814453c0-3.970703,1.265137-7.23291,3.79541-9.788574 c2.530762-2.555664,5.726562-3.833496,9.587402-3.833496c3.526367,0,6.32666,1,8.401367,3 c2.075195,2.000977,3.112305,4.469238,3.112305,7.405273c0,4.365234-1.333984,7.772461-4.000977,10.22168 C147.627441,31.336914,144.447266,32.561523,140.753906,32.561523z M141.118652,26.948242 c1.595703,0,2.678711-1.186523,3.248535-3.55957c0.570312-2.373047,0.855469-4.357422,0.855469-5.956055 c0-2.433105-0.882324-3.650879-2.64502-3.650879c-1.56543,0-2.648438,1.213867-3.249023,3.640137 c-0.600586,2.426758-0.900879,4.408203-0.900879,5.943359C138.427734,25.754883,139.324707,26.948242,141.118652,26.948242z"/>
  <path fill="#FFFFFF" d="M171.578125,22.932617l6.953125,1.710938c-1.246094,2.981445-2.880859,5.046875-4.900879,6.195312 c-2.021973,1.147461-4.111816,1.722656-6.27002,1.722656c-3.176758,0-5.771973-1.008789-7.786133-3.026367 c-2.013672-2.017578-3.020508-4.610352-3.020508-7.776367c0-3.608398,1.188965-6.79834,3.567871-9.570312 c2.378906-2.77002,5.528809-4.156738,9.450195-4.156738c2.842285,0,5.251465,0.855957,7.227051,2.567871 c1.975586,1.710938,2.963867,3.912598,2.963867,6.605469l-7.819824,0.913086c0-2.494629-0.843262-3.742188-2.530273-3.742188 c-1.444336,0-2.470215,1.021484-3.078125,3.063477s-0.912109,3.825195-0.912109,5.349609 c0,2.255859,0.851074,3.383789,2.553711,3.383789C169.647949,26.172852,170.848633,25.092773,171.578125,22.932617z"/>
  <path fill="#FFFFFF" d="M208.717773,8.836426l-4.012695,3.602051c-2.220703,1.990234-3.77832,3.441895-4.675781,4.353516 l5.541992,15.084961h-8.745117l-3.182617-9.854492l-3.962891,3.580078l-1.051758,6.274414h-8.113281l5.198242-31.146973h8.134766 l-2.888672,17.239746l1.666016-1.666016c0.500977-0.533203,0.926758-0.958984,1.275391-1.279297l6.775391-6.187988H208.717773z"/>
  <path fill="#FFFFFF" d="M221.697266,0.72998l-1.841797,10.977539c1.200195-1.430664,2.269531-2.374023,3.210938-2.830078 c0.941406-0.456543,1.998047-0.685547,3.167969-0.685547c2.216797,0,3.993164,0.787109,5.330078,2.361816 c1.335938,1.574219,2.004883,3.898438,2.004883,6.970703c0,3.773438-1.056641,7.195312-3.168945,10.268555 c-2.112305,3.072266-5.043945,4.608398-8.796875,4.608398c-3.555664,0-6.032227-1.459961-7.429688-4.380859l-2.579102,3.856445 h-3.994141l5.199219-31.146973H221.697266z M217.824219,23.800781c0,0.851562,0.060547,1.4375,0.182617,1.756836 c0.12207,0.318359,0.387695,0.623047,0.796875,0.912109s0.917969,0.432617,1.524414,0.432617 c0.774414,0,1.438477-0.253906,1.992188-0.764648c0.554688-0.508789,1.085938-1.638672,1.59375-3.387695 c0.508789-1.75,0.763672-3.613281,0.763672-5.59082c0-2.296387-0.802734-3.445312-2.40918-3.445312 c-1.545898,0-2.65918,1.172852-3.34082,3.517578L217.824219,23.800781z"/>
  <path fill="#FFFFFF" d="M238.8125,8.831055h7.674805l-0.919922,5.55957c1.598633-4.163574,4.042969-6.244141,7.333008-6.244141 c0.258789,0,0.616211,0.037598,1.073242,0.114258l-1.025391,8.214844c-0.791016-0.046875-1.31543-0.069336-1.574219-0.069336 c-1.900391,0-3.294922,0.445312-4.18457,1.333984s-1.523438,2.463867-1.901367,4.726562l-1.567383,9.410156h-8.761719 L238.8125,8.831055z"/>
  <path fill="#FFFFFF" d="M266.025391,8.831055l-3.857422,23.045898h-8.945312l3.857422-23.045898H266.025391z M267.503906,0 l-1.134766,6.777344h-8.946289L258.556641,0H267.503906z"/>
  <path fill="#FFFFFF" d="M294.807617,0.72998l-5.198242,31.146973h-8.181641l0.564453-3.485352 c-1.884766,2.780273-4.164062,4.169922-6.838867,4.169922c-2.082031,0-3.875-0.821289-5.379883-2.464844 c-1.503906-1.642578-2.256836-3.993164-2.256836-7.049805c0-3.789062,1.041992-7.210449,3.125977-10.269043 c2.083008-3.056641,4.751953-4.585938,8.006836-4.585938c2.783203,0,4.660156,1.096191,5.633789,3.287598l1.787109-10.749512 H294.807617z M283.329102,17.021484c0.044922-0.243164,0.067383-0.50293,0.067383-0.776855 c0-0.65332-0.232422-1.20752-0.695312-1.663574c-0.461914-0.456543-1.019531-0.68457-1.672852-0.68457 c-1.5625,0-2.688477,1.205566-3.378906,3.616211c-0.69043,2.412109-1.035156,4.416016-1.035156,6.012695 c0,2.099609,0.814453,3.149414,2.444336,3.149414c1.614258,0,2.6875-1.048828,3.220703-3.147461L283.329102,17.021484z"/>
  <path fill="#FFFFFF" d="M320.798828,2.281738l-0.547852,5.75c-0.911133-0.105469-1.595703-0.15918-2.051758-0.15918 c-1.686523,0-2.834961,0.615723-3.442383,1.848633c2.356445,1.414062,3.53418,3.247559,3.53418,5.498535 c0,1.962891-0.766602,3.705078-2.299805,5.224609c-1.533203,1.521484-4.348633,2.282227-8.446289,2.282227 c-0.866211,0-1.579102-0.030273-2.140625-0.09082c-0.819336-0.091797-1.396484-0.136719-1.729492-0.136719 c-0.554688,0-1.010742,0.162109-1.37207,0.487305s-0.541016,0.699219-0.541016,1.121094 c0,0.363281,0.121094,0.65625,0.364258,0.882812s0.524414,0.359375,0.84375,0.395508 c0.319336,0.039062,1.686523,0.094727,4.104492,0.169922c2.644531,0.092773,4.357422,0.1875,5.140625,0.287109 c0.783203,0.098633,1.645508,0.400391,2.587891,0.902344c0.941406,0.50293,1.683594,1.208008,2.222656,2.114258 s0.80957,1.922852,0.80957,3.050781c0,2.163086-0.958008,4.052734-2.873047,5.667969 C313.046875,39.192383,309.421875,40,304.086914,40c-8.071289,0-12.106445-1.856445-12.106445-5.567383 c0-1.931641,1.37207-3.415039,4.117188-4.449219c-1.483398-0.989258-2.224609-2.213867-2.224609-3.673828 c0-2.555664,1.864258-4.373047,5.594727-5.453125c-2.134766-1.202148-3.201172-2.913086-3.201172-5.134766 c0-2.022949,0.880859-3.772461,2.644531-5.248047c1.763672-1.474609,4.727539-2.212891,8.891602-2.212891 c1.277344,0,2.470703,0.11377,3.580078,0.341797c0.65332-4.304688,3.009766-6.457031,7.068359-6.457031 C319.058594,2.145508,319.841797,2.19043,320.798828,2.281738z M300.527344,31.876953 c-0.865234,0.516602-1.296875,1.049805-1.296875,1.59668c0,1.15625,1.896484,1.734375,5.688477,1.734375 c1.865234,0,3.21875-0.118164,4.061523-0.353516c0.84082-0.235352,1.261719-0.696289,1.261719-1.380859 c0-0.456055-0.197266-0.756836-0.59082-0.901367c-0.395508-0.143555-1.251953-0.24707-2.571289-0.306641 C303.256836,32.09668,301.073242,31.967773,300.527344,31.876953z M307.154297,18.574219 c0.96875,0,1.729492-0.342773,2.282227-1.027344s0.828125-1.459961,0.828125-2.327148 c0-1.688477-0.832031-2.533203-2.49707-2.533203c-1.029297,0-1.813477,0.351074-2.350586,1.050781 s-0.805664,1.52832-0.805664,2.486328c0,0.745117,0.242188,1.323242,0.726562,1.734375S306.427734,18.574219,307.154297,18.574219z"/>
  <path fill="#FFFFFF" d="M345.650391,22.042969h-15.868164c-0.076172,0.625977-0.114258,1.092773-0.114258,1.397461 c0,1.008789,0.323242,1.796875,0.96875,2.362305c0.645508,0.566406,1.462891,0.848633,2.451172,0.848633 c1.869141,0,3.191406-0.972656,3.966797-2.920898l7.751953,1.255859c-1.00293,2.256836-2.625977,4.084961-4.868164,5.480469 c-2.241211,1.396484-4.730469,2.094727-7.466797,2.094727c-3.43457,0-6.220703-0.976562-8.355469-2.931641 c-2.135742-1.955078-3.204102-4.621094-3.204102-7.999023c0-3.665039,1.262695-6.810547,3.786133-9.434082 c2.522461-2.624512,5.821289-3.936035,9.894531-3.936035c3.450195,0,6.197266,1.01709,8.242188,3.052246 c2.043945,2.035156,3.06543,4.737793,3.06543,8.109863C345.900391,20.182617,345.816406,21.055664,345.650391,22.042969z M337.350586,17.615234c0.076172-0.470703,0.115234-0.835938,0.115234-1.094727c0-0.821777-0.255859-1.536133-0.763672-2.144531 c-0.510742-0.608398-1.220703-0.912598-2.132812-0.912598c-0.972656,0-1.853516,0.368164-2.644531,1.106445 s-1.276367,1.753418-1.458984,3.04541H337.350586z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#4F8CCA" d="M34.401367,0.722168h22.350098c0,0,1.194336,0,1.15625,1.239258 L53.055664,30.75c-0.20752,1.061523-1.129395,1.125977-1.129395,1.125977h-22.41748c0,0-1.026367,0-0.961914-1.219727 l4.873047-28.866211C33.411133,0.790039,34.401367,0.722168,34.401367,0.722168z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#6AA9DC" d="M62.686035,0.722168h22.350098c0,0,1.194336,0,1.15625,1.239258 L81.34082,30.75c-0.20752,1.061523-1.129883,1.125977-1.129883,1.125977H57.793945c0,0-1.026855,0-0.961914-1.219727 l4.873047-28.866211C61.696289,0.790039,62.686035,0.722168,62.686035,0.722168z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#3B6BA0" d="M5.856934,0.722168h22.350098c0,0,1.194336,0,1.15625,1.239258 L24.511719,30.75c-0.20752,1.061523-1.129883,1.125977-1.129883,1.125977H0.964844c0,0-1.026855,0-0.961914-1.219727 L4.875977,1.790039C4.867188,0.790039,5.856934,0.722168,5.856934,0.722168z"/>
</svg></div>
        </div>
    </div>
    <!-- /.container -->
</nav>


  <!-- Page Content -->
  <div class="container-fluid">
    <div id="main">
      <!-- Content Row -->
      <div class="row">

        <div class="col-body">
          <!-- row-oriented flex container -->
          

          <!-- Sidebar Column -->
          <nav class="col-nav hidden-sm hidden-xs" id="tg-sb-sidebar">
            

<ul id="sidebar" class="sidebar">
  
  
  
  
  <li>
      <a href="#blockbridge-5-0-release-notes">RELEASE 5.0</a>
      <ul>
          
          
          
          <li><a href="#multi-complex">Multi-complex</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#management">MANAGEMENT</a>
      <ul>
          
          
          
          <li><a href="#management">Datastore Statistics</a></li>
          
          
          
          
          
          
          <li><a href="#managament">Tenant Usage Reports</a></li>
          
          
          
          
          
          
          <li><a href="#management">Usage Visualizations</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#integrations">INTEGRATIONS</a>
      <ul>
          
          
          
          <li><a href="#ats-concurrency-vmware">ATS Concurrency (VMware)</a></li>
          
          
          
          
          
          
          <li><a href="#portal-filter-openstack">Portal Filter (OpenStack)</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#data-mobility">DATA MOBILITY</a>
      <ul>
          
          
          
          <li><a href="#inter-dataplane-clones">Inter-Dataplane Clones</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#performance">PERFORMANCE</a>
      <ul>
          
          
          
          <li><a href="#gcc8-with-lto">GCC8 with LTO</a></li>
          
          
          
          
          
          
          <li><a href="#segment-cache-hugepages">Segment Cache Hugepages</a></li>
          
          
          
          
          
          
          <li><a href="#read-performance-improvements">Read Performance Improvements</a></li>
          
          
          
          
          
          
          <li><a href="#compound-operations">Compound Operations</a></li>
          
          
          
          
          
          
          <li><a href="#improved-irq-routing">Improved IRQ Routing</a></li>
          
          
          
          
          
          
          <li><a href="#metadata-encryption-offload">Metadata Encryption Offload</a></li>
          
          
          
          
          
          
          <li><a href="#compression">Compression</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#platform">PLATFORM</a>
      <ul>
          
          
          
          <li><a href="#amd-epyc-naples--rome">AMD EPYC Naples & Rome</a></li>
          
          
          
          
          
          
          <li><a href="#encrypted-cluster-heartbeating">Encrypted Cluster Hearbeating</a></li>
          
          
          
          
          
          
          <li><a href="#linux-kernel-54">Linux Kernel 5.4</a></li>
          
          
          
          
          
          
          <li><a href="#centos-77">Centos 7.7</a></li>
          
          
          
          
          
          
          <li><a href="#cluster-upgrade-performance">Cluster Upgrade Performance</a></li>
          
          
          
          
          
          
          <li><a href="#volume-check-scheduling">Volume Check Scheduling</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

          </nav>
          

          <!-- Content Column -->
          <main class="col-content">
            <div class="post-header">
   <h1 class="post-title-main">Version 5.0 Release Notes</h1>
</div>



<div class="post-content">

   

    


    

   <p>Blockbridge Version 5.0 is the GA release of the AnyScale architecture. The major
feature of this release is <strong>Multi-Complex</strong>.</p>

<h3 id="multi-complex">Multi-Complex</h3>

<p>Multi-Complex provides in-the-box performance scalability designed to take
advantage of dense NVMe systems and server platforms with high core-count
processors, with a specific focus on AMD EPYC Naples and Rome. In IOPS dense
environments, a multi-complex system can reduce hardware footprint by 8 to 1 or
more! Multi-Complex boosts efficiency by extracting additional performance from
your hardware.
<br />
<br />
<strong>Conisder multi-complex when you need to</strong>:</p>

<ul>
  <li>Reduce hardware costs when scaling storage performance</li>
  <li>Reduce hardware costs for dedicated multi-tenant scenarios</li>
  <li>Implement classes of storage with independent QoS guarantees</li>
  <li>Maximize performance density</li>
</ul>

<p>Multi-complex configurations maintain full compatibility with your existing
applications and deployments (i.e., VMware, Kubernetes, OpenStack, etc.).</p>

<h2 id="management">Management</h2>

<p>Release 5.0 includes several improvements in the visibility into dataplane
performance and tenant usage:
<br />
<br /></p>

<ul>
  <li>
    <p><strong>New Datastore Statistics:</strong> Administrators now have a system-wide view of
task duration and queueing from the Datastore Statistics tab.</p>
  </li>
  <li>
    <p><strong>Improved Visibility into Tenant Usage:</strong> The tenant usage reports available
under nodes and accounts now include the datastore, as well as a translation
of the virtual service serial number to the tenant’s selected label.</p>
  </li>
  <li>
    <p><strong>Performance and Usage Visualizations:</strong> From the administrator’s view of
the Infrastructure, select the heading of any of the elements under Global
Usage (e.g., Read Bandwidth, IOPS, Snapshots, etc.)  to toggle a per-datastore
breakdown that updates in real-time.</p>
  </li>
</ul>

<h2 id="integrations">Integrations</h2>

<h3 id="ats-concurrency-vmware">ATS Concurrency (VMware)</h3>

<p>Release 5.0 brings substantial concurrency improvements to the VAAI atomic
test-and-set (ATS) command, SCSI COMPARE AND WRITE.  VMware uses this command
for cluster heartbeating and to coordinate VMFS updates between cluster
members.  In this release, our implementation of the ATS primitive no longer
detectably impacts other reads and writes to the volume.</p>

<h3 id="portal-filter-openstack">Portal Filter (OpenStack)</h3>

<p>Advanced filtering options in this release allow for more flexible network
selection capabilities when provisioning Blockbridge storage from OpenStack.</p>

<h2 id="data-mobility">Data Mobility</h2>

<h3 id="inter-dataplane-clones">Inter-Dataplane Clones</h3>

<p>Read-through “thin” clones within the same virtual storage service (VSS) have
been supported for some time.  Release 5.0 extends support to include cross-VSS
and cross-dataplane read-copy clones of snapshots.  This new type of clone
copies data on demand, as needed by user I/O operations.  Read-copy clones may
also be copied in their entirety via a background task.</p>

<p>(Block clones were available starting in version 4.3 as part of our early
access program.)</p>

<h2 id="performance">Performance</h2>

<h3 id="gcc8-with-lto">GCC8 with LTO</h3>

<p>We now build all Blockbridge software written in C or C++ with the improved
gcc8 toolchain.  We’ve seen small performance improvements across the board,
not to mention improved static checking.  Additionally, our dataplane I/O
processor now compiles with link-time optimizations that provide a notable
boost in performance.</p>

<h3 id="segment-cache-hugepages">Segment Cache Hugepages</h3>

<p>The segment cache is a foundation of our low-latency dataplane.  The cache
typically reserves between four to eight GiB of memory and is used to store
metadata for recently accessed locations on disk.  We now allocate this cache
from a pool of 1 GiB “hugepages”, resulting in fewer TLB misses and improved
performance.</p>

<h3 id="read-performance-improvements">Read Performance Improvements</h3>

<p>The memory management function used to allocate scatter-gather buffers for read
operations uses an improved algorithm for sourcing contiguous regions of
memory.  This new cache-friendly technique reduces random memory references
significantly, increasing performance.</p>

<h3 id="compound-operations">Compound Operations</h3>

<p>Older versions of the dataplane software chopped I/O’s smaller than 128 KiB
into 4 KiB chunks for processing through the storage stack.  In this release,
the dataplane now handles most typical cases of I/O’s that are between 4 KiB
and 128 KiB as a single unit.  This optimization reduces the length of the
internal task queue significantly, resulting in far lower latencies.</p>

<h3 id="improved-irq-routing">Improved IRQ Routing</h3>

<p>The 5.0 release includes improvements in how the dataplane balances NIC and
NVMe interrupts to achieve ultra low latency.  Interrupt routing for ethernet
attached NVMe is now managed according to the current role of the cluster
member.  And, the IRQ pattern matching logic has improved to allow for smaller,
simpler configuration.</p>

<h3 id="metadata-encryption-offload">Metadata Encryption Offload</h3>

<p>The dataplane provides at-rest encryption for all metadata.  Previously,
encryption processing happened in the context of processing user I/O.  In this
release, the dataplane offloads metadata encryption to other CPU cores.  This
optimization improves concurrency during write operations significantly.</p>

<h3 id="compression">Compression</h3>

<p>The dataplane was updated to use Zstandard version 1.4.3 for the Economy and
Adaptive Economy data reduction modes.  This version offers not only faster
compression and decompression performance but also improved compression.</p>

<h2 id="platform">Platform</h2>

<h3 id="amd-epyc-naples--rome">AMD EPYC Naples &amp; Rome</h3>

<p>Blockbridge now implements optimizations for the AMD EPYC line of server
processors.  Release 5.0 provides tight integration with the onboard SP5100
watchdog and improved handling for complex NUMA layouts.</p>

<h3 id="encrypted-cluster-heartbeating">Encrypted Cluster Heartbeating</h3>

<p>By default, Blockbridge 5.0 installs with encrypted cluster heartbeating, using
a pre-shared key unique to each cluster.  Blockbridge data links have always
been encrypted.  Now by encrypting the cluster heartbeating, we’re protecting
against rogue nodes and providing an additional line of defense against
configuration mistakes.</p>

<h3 id="linux-kernel-54">Linux Kernel 5.4</h3>

<p>Blockbridge now ships and supports our own kernel version based on the latest
Long Term Support (LTS) linux kernel version 5.4. This kernel provides improved
NVMe support, the latest network drivers, support for the latest server
platforms, and the latest bug fixes from upstream linux. The bare-metal and
cloud images include the blockbridge kernel built-in.</p>

<h3 id="centos-77">Centos 7.7</h3>

<p>The latest CentOS 7.7 release is now the base for all Blockbridge pre-built
bare-metal and cloud images.</p>

<h3 id="cluster-upgrade-performance">Cluster Upgrade Performance</h3>

<p>Client I/O interruption during an update is now less than half of what it was
in early 4.x series releases. Two significant changes contribute to the
performance here.  First, the dataplane now uses multi-core optimized memory
allocation to initialize the buffer cache on process restart.  Second, clusters
now upgrade their services in-place, prioritizing the quick restart of the
dataplane controller and avoiding failover.</p>

<h3 id="volume-check-scheduling">Volume Check Scheduling</h3>

<p>The HEAL volume manager now has tight integration with the disk-level data
consistency checker.  You can specify a time range for each day of the week
when it’s acceptable to run consistency checking, in addition to the
permissible check bandwidth and the number of concurrently checking
volumes. Planning metrics allow you to tune your desired check SLA with a
predictable performance impact.</p>

<p><em>(Note: Some of the above features were backported to 4.x releases as part of
our early access program.)</em></p>


    <div class="tags">
        
    </div>

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2020 Blockbridge Networks LLC. All rights reserved. <br />
 Site last generated: Mar 4, 2020
                </div>
            </div>
</footer>


          </main>

          <!-- /.col-body -->
        </div>

        <!-- /.row -->
      </div>
      <!-- /#main -->
    </div>
  </div>

</body>

</html>
